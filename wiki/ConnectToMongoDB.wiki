#summary 连接数据库

= 连接MongoDB =
在能够对MongDB进行操作之前，需要使用BuguConnection连接到MongoDB数据库。代码如下：
{{{
BuguConnection conn = BuguConnection.getInstance();
conn.connect("192.168.0.100", 27017, "mydb", "username", "password");
}}}
如果不需要提供授权帐号，那么可以省略用户名和密码：
{{{
BuguConnection conn = BuguConnection.getInstance();
conn.connect("192.168.0.100", 27017, "mydb");
}}}

==连接副本集（ReplicaSet）==
如果需要连接到一组ReplicaSet，那么代码例子如下：
{{{
List<ServerAddress> addrs = new ArrayList<ServerAddress>();
addrs.add(new ServerAddress("192.168.0.100", 27017));
addrs.add(new ServerAddress("192.168.0.101", 27017));
BuguConnection conn = BuguConnection.getInstance();
conn.setReplicaSet(addrs).setDatabase("mydb").setUsername("username").setPassword("password").connect();
}}}

==设置连接参数==
如果不想使用默认的连接参数，那么可以自己提供一个MongoOptions：
{{{
MongoOptions options = ...
BuguConnection conn = BuguConnection.getInstance();
conn.setHost("192.168.0.100").setPort(27017).setDatabase("mydb").setOptions(options).connect();
}}}

==获取DB==
用BuguMongo来进行开发，几乎不需要直接使用MongoDB Java Driver中的DB类。当然，在一些特殊的情况下，你可能会需要使用它，这时，可以通过BuguConnection的getDB()方法，来获取DB实例：
{{{
import com.mongodb.DB;
...
BuguConnection conn = BuguConnection.getInstance();
conn.connect("192.168.0.100", 27017, "mydb", "username", "password");
...
DB db = conn.getDB();
}}}